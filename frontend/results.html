<!-- frontend/results.html (NOVO FICHEIRO) -->
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>English Quiz - Resultados</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #f8faff; /* Fundo levemente azulado/cinza */
      }
      /* √çcone de Sucesso (C√≠rculo Verde com Alvo) */
      .icon-success {
        display: inline-block;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background-color: #22c55e; /* green-500 */
        position: relative;
        box-shadow: 0 0 0 10px rgba(34, 197, 94, 0.1);
      }
      .icon-success::before,
      .icon-success::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        border: 3px solid white;
      }
      .icon-success::before {
        width: 40px;
        height: 40px;
      }
      .icon-success::after {
        width: 20px;
        height: 20px;
        background-color: white;
      }
    </style>
  </head>
  <body class="flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-2xl text-center">
      <!-- √çcone e Cabe√ßalho -->
      <div class="icon-success mb-6 mx-auto"></div>
      <h1 class="text-4xl font-bold text-gray-800">Resultados</h1>
      <p class="text-lg text-gray-500 mt-2 mb-10">
        Muito bem! Continue praticando! üëè
      </p>

      <!-- Card Principal de Score -->
      <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
        <!-- Score Percentual -->
        <div class="text-7xl font-bold text-gray-800 mb-2">
          <span id="score-percent">0</span>%
        </div>
        <div
          id="score-feedback-label"
          class="inline-block bg-indigo-100 text-indigo-800 text-sm font-semibold px-4 py-1 rounded-full mb-8"
        >
          <!-- O texto ser√° inserido via JS -->
        </div>

        <!-- Stats (Contagem) -->
        <div class="flex justify-around text-center">
          <div>
            <div id="correct-count" class="text-3xl font-bold text-green-500">
              0
            </div>
            <div class="text-sm text-gray-500">Respostas Corretas</div>
          </div>
          <div>
            <div id="incorrect-count" class="text-3xl font-bold text-red-500">
              0
            </div>
            <div class="text-sm text-gray-500">Respostas Incorretas</div>
          </div>
          <div>
            <div id="total-count" class="text-3xl font-bold text-blue-500">
              0
            </div>
            <div class="text-sm text-gray-500">Total de Quest√µes</div>
          </div>
        </div>
      </div>

      <!-- Cards de Detalhes -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
        <!-- Card Categoria -->
        <div class="bg-white rounded-xl shadow-lg p-6 text-left">
          <h3 class="text-sm font-semibold text-gray-400 mb-2">‚≠ê Categoria</h3>
          <p id="category-name" class="text-2xl font-bold text-gray-800">
            Carregando...
          </p>
          <p class="text-gray-500 text-sm mt-1">
            Voc√™ completou exerc√≠cios desta categoria.
          </p>
        </div>
        <!-- Card Performance -->
        <div class="bg-white rounded-xl shadow-lg p-6 text-left">
          <h3 class="text-sm font-semibold text-gray-400 mb-2">
            üìà Performance
          </h3>
          <p class="text-2xl font-bold text-gray-800">
            Taxa de acerto: <span id="accuracy-rate">0%</span>
          </p>
          <!-- Barra de Progresso do Score -->
          <div class="w-full bg-gray-200 rounded-full h-2.5 mt-3">
            <div
              id="accuracy-bar"
              class="bg-green-500 h-2.5 rounded-full"
              style="width: 0%"
            ></div>
          </div>
        </div>
      </div>

      <!-- Bot√µes de A√ß√£o -->
      <div class="flex flex-col md:flex-row gap-4 justify-center">
        <a
          href="/quiz.html"
          id="restart-quiz-btn"
          class="bg-indigo-600 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-indigo-700 transition duration-300"
        >
          ‚Üª Fazer Novo Quiz (Mesma Categoria)
        </a>
        <a
          href="/index.html"
          class="bg-white text-gray-700 font-bold py-3 px-6 rounded-full shadow-lg border border-gray-200 hover:bg-gray-100 transition duration-300"
        >
          ‚åÇ Voltar ao In√≠cio
        </a>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // 1. Ler os par√¢metros da URL
        const params = new URLSearchParams(window.location.search);

        const total = parseInt(params.get('total')) || 0;
        const correct = parseInt(params.get('correct')) || 0;
        const incorrect = parseInt(params.get('incorrect')) || 0;
        const category = params.get('category') || 'Indefinida';

        // Calcula o score percentual
        const score = total > 0 ? Math.round((correct / total) * 100) : 0;

        // ##################################################
        // ##           IN√çCIO DA MODIFICA√á√ÉO              ##
        // ##################################################

        // 3. Definir o texto de feedback din√¢mico
        const feedbackLabel = document.getElementById('score-feedback-label');
        let feedbackMessage = '';

        if (score === 100) {
          feedbackMessage = 'Excelente! üèÜ';
        } else if (score > 90) {
          feedbackMessage = '√ìtimo!';
        } else if (score > 70) {
          feedbackMessage = 'Muito bom';
        } else if (score > 50) {
          feedbackMessage = 'Continue praticando';
        } else if (score > 30) {
          feedbackMessage = 'Estamos melhorando';
        } else {
          feedbackMessage = 'Vamos estudar mais';
        }
        feedbackLabel.textContent = feedbackMessage;

        // ##################################################

        // 2. Preencher os elementos do DOM
        document.getElementById('score-percent').textContent = score;
        document.getElementById('correct-count').textContent = correct;
        document.getElementById('incorrect-count').textContent = incorrect;
        document.getElementById('total-count').textContent = total;
        document.getElementById('category-name').textContent = category;
        document.getElementById('accuracy-rate').textContent = score + '%';

        // 3. Atualizar a barra de progresso
        const accuracyBar = document.getElementById('accuracy-bar');
        accuracyBar.style.width = score + '%';
        if (score < 50) {
          accuracyBar.classList.remove('bg-green-500');
          accuracyBar.classList.add('bg-red-500');
        }

        // 4. (B√≥nus) Atualizar o bot√£o "Fazer Novo Quiz" para manter os filtros
        // (Reutiliza os filtros, exceto a categoria que j√° est√° na URL)
        const level = params.get('level') || 'BEGINNER';
        const limit = params.get('limit') || 10;
        const restartBtn = document.getElementById('restart-quiz-btn');
        restartBtn.href = `/quiz.html?category=${category}&level=${level}&limit=${limit}`;
      });
    </script>
  </body>
</html>
