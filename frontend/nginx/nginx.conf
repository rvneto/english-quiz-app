# frontend/nginx/nginx.conf

server {
    # Nginx escuta na porta 80
    listen 80;
    
    # Define o diretório raiz para servir os arquivos estáticos compilados
    root /usr/share/nginx/html;
    
    # Define o arquivo de índice principal
    index index.html;

    # Se a URL não for encontrada (como rotas de roteamento do React),
    # o Nginx deve retornar o index.html. Isso é ESSENCIAL para o React Router.
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Bloco extra para servir arquivos de assets (como CSS/JS compilados) diretamente
    # Isso garante que o CSS seja carregado de forma limpa.
    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires 1y;
        log_not_found off;
        # Tenta servir o arquivo estático diretamente.
        try_files $uri @fallback;
    }

    # Fallback para o bloco de assets (se necessário, embora o location / já ajude)
    location @fallback {
        return 404;
    }
}
